function toggleDonationForm(e){switch(e){case!0:jQuery("#checkout-form-extra-fields-donations").removeClass("hide"),jQuery("#checkout-form-extra-fields-fees").removeClass("hide");break;case!1:jQuery("#checkout-form-extra-fields-donations").addClass("hide"),jQuery("#checkout-form-extra-fields-fees").addClass("hide")}}function feeModsCalcDonation(){var e=parseFloat(jQuery('input[name="reg-price"]').val())||0,o=parseFloat(jQuery('input[name="pwyw-price"]').val())||0,t=Math.max(e,o),n=t+parseFloat(idcPayVars.feeMods.donation)+parseFloat(idcPayVars.feeMods.fee);return jQuery("#cover_fees_on_checkout").is(":checked")&&(n+=parseFloat(jQuery("#cover_fees_on_checkout").val())),Number(n.toFixed(2))}function idcSetDonation(e){if("undefined"==typeof e||"0">e){e="0";var o=jQuery('input[name="checkout_donation"]');jQuery(o).val("0")}idcPayVars.feeMods.donation=idfParseFloat(e),jQuery(document).trigger("idcDonationChange",e)}function idcGetDonation(){var e=jQuery('input[name="checkout_donation"]');donation=jQuery(e).val(),idcSetDonation(donation)}function idcSetFee(e){idcPayVars.feeMods.fee=idfParseFloat(e),jQuery(document).trigger("idcCoverFeeChange")}idcPayVars.feeMods={donation:idfParseFloat("0"),fee:idfParseFloat("0")},jQuery(document).ready(function(){jQuery(document).on("idcCheckoutLoaded",function(e){idcGetDonation()}),jQuery('input[name="checkout_donation"]').on("change",function(e){jQuery(document).trigger("idcBeforeDonationChange",jQuery(this).val())}),jQuery(document).on("idcBeforeDonationChange",function(e,o){idcSetDonation(o)}),jQuery(document).on("idcPaySelect",function(e,o){console.log("idcSelClass(selection)",idcSelClass(o));var t="stripe"==idcSelClass(o);t="stripe-checkout"==idcSelClass(o)?!0:t,t="cps"==idcSelClass(o)?!0:t,toggleDonationForm(t),idcGetDonation()}),jQuery(document).on("idcDonationChange",function(e,o){var t=feeModsCalcDonation(),n=jQuery(".pay_selector").hasClass("active"),a=jQuery(".currency-symbol sup").text();idcSetPriceText(n,a,idfPriceFormat(t))}),jQuery(document).on("idcCheckoutSubmit",function(e,o){("submitPaymentStripe"==o||"submitPaymentStripeCheckout"==o||"submitPaymentCoinPayments"==o)&&(total=feeModsCalcDonation(),jQuery('input[name="pwyw-price"]').val(total))}),jQuery('input[name="cover_fees_on_checkout"]').on("change",function(){jQuery(document).trigger("idcBeforeCoverFeeChange",[jQuery(this).attr("checked"),jQuery(this).val()])}),jQuery(document).on("idcBeforeCoverFeeChange",function(e,o,t){switch(o){case"checked":idcSetFee(t);break;default:idcSetFee("0")}}),jQuery(document).on("idcCoverFeeChange",function(e,o,t){var n=feeModsCalcDonation(idcPayVars.feeMods.fee),a=jQuery(".pay_selector").hasClass("active"),i=jQuery(".currency-symbol sup").text();idcSetPriceText(a,i,idfPriceFormat(n))})}),jQuery(document).on("idcSetSubmitName",function(e,o){var t=jQuery("#payment-form .pay_selector").length;1>=t&&("submitPaymentStripe"==o||"submitPaymentStripeCheckout"==o||"submitPaymentCoinPayments"==o)&&toggleDonationForm(!0)});
