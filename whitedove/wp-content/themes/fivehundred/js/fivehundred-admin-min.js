function fhOpenFrame(e){file_frame=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),file_frame.on("select",function(){attachment=file_frame.state().get("selection").first().toJSON(),jQuery(e).siblings("input").val(attachment.url)}),file_frame.open()}jQuery(document).ready(function(){var e=!0;wp.media&&(_orig_send_attachment=wp.media.editor.send.attachment),jQuery(".uploader .button").on("click",function(t){wp.media.editor.send.attachment;var n=jQuery(this);n.attr("id").replace("_button","");return e=!0,wp.media.editor.send.attachment=function(t,n){if(!e)return _orig_send_attachment.apply(this,[t,n]);jQuery("#logo-input").val(n.url),jQuery("#logo-preview img").replaceWith('<img id="logo-image" src="'+n.url+'"/>')},wp.media.editor.open(n),!1}),jQuery(".add_media").on("click",function(){e=!1}),jQuery("#logo-input").change(function(){var e=jQuery("#logo-input").val();console.log(e),jQuery("#logo-preview").html('<img src="'+e+'"/>')}),jQuery(".fh_media_button").on("click",function(e){e.preventDefault(),fhOpenFrame(jQuery(this))}),jQuery(".fh_media_button2").on("click",function(e){e.preventDefault(),fhOpenFrame(jQuery(this))}),jQuery(document).bind("widget-updated",function(e,t){jQuery(".fh_media_button").on("click",function(e){e.preventDefault(),fhOpenFrame(jQuery(this))}),jQuery(".fh_media_button2").on("click",function(e){e.preventDefault(),fhOpenFrame(jQuery(this))})})});