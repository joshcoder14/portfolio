jQuery(document).ready(function(){jQuery(".mdid-project-grid:odd").addClass("odd"),jQuery("#master-select-all").click(function(){jQuery(".level-select").attr("checked","checked").prop("checked",true)}),jQuery("#master-clear-all").click(function(){jQuery(".level-select").removeAttr("checked").prop("checked",false)}),jQuery(".mdid-project-grid .select-all").click(function(){var e=jQuery(this).parents(".mdid-project-grid").data("projectid");jQuery(".select-"+e).attr("checked","checked").prop("checked",true)}),jQuery(".mdid-project-grid .clear-all").click(function(){var e=jQuery(this).parents(".mdid-project-grid").data("projectid");jQuery(".select-"+e).removeAttr("checked").prop("checked",false)});var e=jQuery("#edit-level").val();jQuery('input[name="edit-level-filter"]').change(function(){var e=jQuery('select[name="edit-level"] option'),t=jQuery(this).val();t=t.toLowerCase(),console.log(t),jQuery.each(jQuery(e),function(r,a){var c=jQuery(this).text();c=c.toLowerCase(),""===t?jQuery(e).show():c.includes(t)?jQuery(this).show():jQuery(this).hide()})}),jQuery(".level-select").change(function(){true==jQuery(this).prop("checked")?jQuery(this).removeClass("pending"):jQuery(this).addClass("pending")}),jQuery("#edit-level").change(function(){e=jQuery(this).val(),e==idc_localization_strings.choose_product||0==e?jQuery("#save-assignments").attr('disabled', 'disabled').prop('disabled', true):jQuery("#save-assignments").removeAttr('disabled').prop('disabled', false),jQuery(".level-select").removeAttr("checked").prop("checked",false),jQuery.each(jQuery(".level-select"),function(){jQuery(this).data("owner")>0&&(jQuery(this).data("owner")==e?jQuery(this).removeAttr('disabled').prop('disabled', false):jQuery(this).attr('disabled', 'disabled').prop('disabled', true))}),jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"mdid_get_assignments",Level:e},success:function(e){var t=JSON.parse(e);jQuery.each(t,function(e,t){var r=this.project,a=this.levels,c=jQuery('.mdid-project-grid[data-projectid="'+r+'"]');jQuery.each(a,function(){var e=jQuery(".select-"+r+'[data-level="'+this+'"]');jQuery(e).attr("checked","checked").prop("checked",true)})})}})}),jQuery("#save-assignments").click(function(e){e.preventDefault();var t=jQuery("#edit-level").val(),r=jQuery(".mdid-project-grid").has("input.level-select:checked"),a={projects:{},level:t};jQuery.each(r,function(e,r){var c=jQuery(this).data("projectid");a.projects[e]={},a.projects[e].id=c,a.projects[e].levels={},jQuery(this).find(".level-select").each(function(r,c){var i=jQuery(this).data("level");true==jQuery(this).prop("checked")?(jQuery(this).data("owner",t),a.projects[e].levels[r]=i):jQuery(this).data("owner")==t&&jQuery(this).removeData("owner")})}),jQuery.each(jQuery(".pending"),function(){jQuery(this).data("owner")==t&&(jQuery(this).removeData("owner"),jQuery(this).removeClass("pending"))}),Object.keys(a).length>0&&jQuery.ajax({url:md_ajaxurl,type:"POST",data:{action:"mdid_save_assignments",Assignments:a},success:function(e){location.reload()}})})});